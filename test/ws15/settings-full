# Languages for training and testing.
# The sets TRAIN_LANG and TEST_LANG must be disjoint subsets of ALL_LANGS.
ALL_LANGS=(AR CA DT HG MD SW UR)			# Used by stage 1.
TRAIN_LANG=(AR CA DT HG MD UR)				# Used by stage 3 and 7.
DEV_LANG=(SW)						# Used by stage 3.
EVAL_LANG=(SW)						# Used by stage 3.
TEST_LANG=(SW)						# Used by stage 3.
TEST_LANG_NAME=swahili # Used by $EXPLOCAL, $evalreffile, $phonelm, and $Gfst.  Compatible with $langmap.

# Input test DATA and output EXPeriment results.
DATA=data-WS15
DATA_URL=http://isle.illinois.edu/mc/PTgenTest/data-WS15.tgz
EXP=$HOME/Tmp/Exp
EXPLOCAL=$EXP/$TEST_LANG_NAME-X
tmproot=/tmp

TESTTYPE='dev'						# Used by stage 3.  Either 'dev' or 'eval'.

# Transcriptions.
TURKERTEXT=$DATA/batchfiles				# Read by stage 1.
LISTDIR=$DATA/lists					# Read by stage 3.
langmap=$LISTDIR/langcodes.txt				# Read by stage 3.
TRANSDIR=$DATA/nativetranscripts			# Read by stage 7.
evalreffile=$TRANSDIR/$TEST_LANG_NAME/${TESTTYPE}_text	# Read by stage 15.

# Alphabets.
engdict=$DATA/let2phn/eng_dict.txt			# Read by stage 1.
engalphabet=$DATA/let2phn/englets.vocab			# Read by stage 6 and 11.
phnalphabet=$DATA/phonesets/univ.compact.txt		# Read by stage 6, 10, 12, and 15.
phonelm=$DATA/langmodels/$TEST_LANG_NAME/bigram.fst	# Read by stage 10.  (Or ...unigram.fst.)

# Data splits.
trainids=$EXPLOCAL/lists/train			# Made by stage 3, read by 11.
testids=$EXPLOCAL/lists/${TESTTYPE}		# Made by stage 3, read by 15.
adaptids=$EXPLOCAL/lists/adapt			# Internal to stage 3, to create $splitadaptids.

# Intermediate files.
transcripts=$EXPLOCAL/transcripts.txt		# Made by stage 1,  modified by 2.
simfile=$EXPLOCAL/simscores.txt			# Made by stage 2,  read by 4.
mergedir=$EXPLOCAL/mergedir			# Made by stage 4,  read by 11.
aligndist=$EXPLOCAL/aligndists.txt		# Internal to stage 4, via $aligneropt.
mergefstdir=$EXPLOCAL/mergefstdir		# Made by stage 5 and 14 (the files in that dir), read by 7 and 14.
splittrainids=$EXPLOCAL/lists/trainids		# Made by stage 3,  read by 5.
splitadaptids=$EXPLOCAL/lists/adaptids		# Made by stage 3,  read by 5 and 14.
splittestids=$EXPLOCAL/lists/testids		# Made by stage 3,  read by 5, 14 and 15.
Pstyle=simple					# Used by stage 6.  One of simple, letctxt or phnletctxt.
initcarmel=$EXPLOCAL/carmel/$Pstyle		# Made by stage 6,  read by 8. ($initcarmel.trained is made by 8, read by 9.)
carmeltraintxt=$EXPLOCAL/carmel/training.txt	# Made by stage 7,  read by 8.
reffile=$EXPLOCAL/ref_train_text		# Internal to stage 7.
Pfst=$EXPLOCAL/P.fst				# Made by stage 9,  read by 13.
Gfst=$EXPLOCAL/${TEST_LANG_NAME}.G.fst		# Made by stage 10, read by 13.
Lfst=$EXPLOCAL/L.fst				# Made by stage 11, read by 13.
Tfst=$EXPLOCAL/T.fst				# Made by stage 12, read by 13.
TPLfst=$EXPLOCAL/TPL.fst			# Made by stage 13, read by 14.
GTPLfst=$EXPLOCAL/GTPL.fst			# Made by stage 13, read by 14.
decodelatdir=$EXPLOCAL/decode			# Made by stage 14, read by 15.
hypfile=$EXPLOCAL/hypotheses.txt		# Made by stage 15, read by human.
evaloutput=$EXPLOCAL/eval.txt			# Made by stage 15, read by human.

# Parameters.
rmprefix="http://"      # Used by stage 1, to create file IDs.
gapsymbol='_'		# Used by stage 4, via $aligneropt.
nparts=4		# Used by stage 4.
topN=4			# Used by stage 4.
alignswitchpenalty=1	# Used by stage 5, via $alignertofstopt.
delimsymbol='%'		# Used by stage 6.
nrand=12		# Used by stage 7.
phneps='<eps>'		# Used by stage 9.
leteps='-'		# Used by stage 9.
disambigdel='#2'	# Used by stage 9, 10 and 12.
disambigins='#3'	# Used by stage 9, 10 and 12.
Pscale=1		# Used by stage 9.
Gscale=1		# Used by stage 10.
Lscale=1		# Used by stage 11.
Tnumins=10		# Used by stage 12.
Tnumdel=5		# Used by stage 12.
Mscale=1		# Used by stage 14.
prunewt=2		# Used by stage 15.
nparallel=11		# Used by many stages.  TODO: infer from `nproc` - 1.

# Command-line options.
aligneropt="--dist $aligndist --empty $gapsymbol"			# Used by stage 4.
alignertofstopt="--switchpenalty $alignswitchpenalty"			# Used by stage 5.
carmelinitopt="--$Pstyle" # --startwith=$EXPLOCAL/simple.trained	# Used by stage 6.

# Flags.
makeGTPLM=1		# Used by stage 14.
#makeTPLM=1		# Used by stage 14.
#decode_for_adapt=1	# Used by stage 14.
#evaloracle=1		# Used by stage 15.
debug=1			# Used by stage 15.

# Which stages to run, inclusive.
startstage=1
endstage=15
